#:kivy 2.0
#:import utils kivy.utils
#:import Factory kivy.factory.Factory

### azul da maua
#background_color: (0/255,71/255,133/255,1)
#background_color: utils.get_color_from_hex('#004785')
###  azul da bayer
#background_color: (0/255,188/255,255/255,1)
### verde da bayer
#background_color: (137/255,211/255,41/255,1)

######################################################################################################################
######################################################## DEFINIÇÕES ##################################################
######################################################################################################################

######################################## Widgtes Principais 
<Label>
	font_size: 28
	background_color: (1,1,1,1)
	color: (0,0,0,1)
	spacing:0
	padding:(0,0)
	bold: True
	canvas.before:
		Color:
			rgba: self.background_color
		Rectangle:
			size: self.size
			pos: self.pos

<TextInput>
	font_size: 18
	size_hint: (0.2, 0.05)
	padding: 0
	background_color: utils.get_color_from_hex('#004785')
	cursor_color: (1,1,1,1)
	foreground_color: (1,1,1,1)
	valign: "middle"
	multiline: False

<CustomDropdown@DropDown>:
    max_height: 150
    bar_width: 5
    bar_color: 0, 1, 0, 1   # green
    bar_inactive_color: 1, 0, 0, 1  # red        
    effect_cls: 'ScrollEffect'
    scroll_type: ['bars', 'content']
	
<SpinnerOptionsCultura@SpinnerOption>:
	italic: 0
	font_size: 18
	#background_normal: ''
    background_color:  (0,71/255,133/255)
    color: (1,1,1,1)
	height: 30

<SpinnerOptionsEspecie@SpinnerOption>:
	italic: 1
	font_size: 18
	#background_normal: ''
    background_color:  (0,71/255,133/255)
    color: (1,1,1,1)
	height: 30

<Spinner>
	font_size: 18
	auto_width: False
	size_hint: (0.17, 0.035)
	pos_hint: {'x': 0.06, 'y': 0.47}
	background_normal: ''
	background_color: (0,71/255,133/255)
	color: (1,1,1,1)
    dropdown_cls: Factory.CustomDropdown

######################################## Widgtes Background
<ImageFrame@Image>
	canvas:
        Color:
            rgba: 1, 1, 1, 0
        Rectangle:
            pos: self.pos
            size: self.size
	background_normal:''
	source: "Assets/frame.png"
	size_hint: (1,0.95)
	allow_stretch:True
	keep_ratio:False

<PlotHistorico@Image>
	canvas:
        Color:
            rgba: 1, 1, 1, 0
        Rectangle:
            pos: self.pos
            size: self.size
	background_normal:''
	source: "Assets/plotHistorico.png"
	size_hint: (0.8,0.8)
	allow_stretch:True
	keep_ratio:False

######################################## Widgtes Cabeçalho
<LabelID@Label>
	text: "ID do ensaio:"
	font_size: 20
	size_hint: (0.15, 0.05)
	pos_hint: {'x': 0.02, 'top': 0.91}

<LabelID_Numero@Label>
	font_size: 20
	size_hint: (0.2, 0.05)
	pos_hint: {'x': 0.15, 'top': 0.91}
	color: (1,1,1,1)
	canvas.before:
		Color:
			rgba: (0/255,71/255,133/255,1)
		Rectangle:
			size: self.size
			pos: self.pos

<TextInputID@TextInput>
	id:id_ensaio
	pos_hint: {'x': 0.15, 'top': 0.91}

<LabelTecnico@Label>:
	text: "Técnico:"
	font_size: 20
	size_hint: (0.15, 0.05)
	pos_hint: {'x': 0.035, 'top': 0.85}

<LabelTecnico_Nome@Label>
	font_size: 20
	size_hint: (0.2, 0.05)
	pos_hint: {'x': 0.15, 'top': 0.85}
	color: (1,1,1,1)
	canvas.before:
		Color:
			rgba: (0/255,71/255,133/255,1)
		Rectangle:
			size: self.size
			pos: self.pos

<TextInputTecnico@TextInput>:
	id:tecnico
	pos_hint: {'x': 0.15, 'top': 0.85}

<LabelTime@Label>:
	font_size: 20
	size_hint: (0.15, 0.05)
	pos_hint: {'x': 0.36, 'top': 0.91}

<LabelTime_Numero@Label>
	font_size: 20
	size_hint: (0.2, 0.05)
	pos_hint: {'x': 0.46, 'top': 0.91}
	color: (1,1,1,1)
	canvas.before:
		Color:
			rgba: (0/255,71/255,133/255,1)
		Rectangle:
			size: self.size
			pos: self.pos

<BotaoID@Button>:
	font_size: 20
	size_hint: (0.12, 0.05)
	pos_hint: {'x': 0.8, 'top': 0.91}
	background_color: (0,0,0,0)
	color: (1,1,1,1)
	background_normal: ''
	canvas.before:
		Color:
			rgba: (137/255,211/255,41/255,1)
		RoundedRectangle:
			size: self.size
			pos: self.pos
			radius: [10]


<MyPopup@Popup>
	auto_dismiss: False
	title: "This is a popup box"
	Button:
		text: "Close me!"
		font_size:24
		on_release: root.dismiss()

<MyButton@Button>
	font_size: 32
	size_hint: (0.1, 0.2)
	background_normal: ''
	background_color: (0/255,71/255,133/255,1)
	color: (1,1,1,1)
	bold:True
	pos_hint: {'x':0, "y": 1}



<RoundedButton@MyButton>
	background_color: (0,0,0,0)
	color: (1,1,1,1)
	background_normal: ''
	canvas.before:
		Color:
			rgba: (0/255,71/255,133/255,1)
		RoundedRectangle:
			size: self.size
			pos: self.pos
			radius: [10]



<TabsButton@Button>
	font_size: 26
	size_hint: (0.12, 0.055)
	background_normal: ''
	background_color: (0/255,71/255,133/255,1)
	color: (1,1,1,1)
	bold:True


<CriarEnsaio@RoundedButton>:
	text: "Criar Ensaio"
	font_size: 20
	size_hint: (0.12, 0.05)
	pos_hint: {'x': 0.8, 'top': 0.85}

<GerarRelatorio@RoundedButton>:
	text: "Gerar relatório"
		font_size: 20
		size_hint: (0.12, 0.05)
		pos_hint: {'x': 0.8, 'top': 0.85}

<CulturaImage@Image>:
	source:"Assets/Cultura_frame.png"
	size_hint: (0.18, 0.18)	

<SpinnerCultura@Spinner>
	text: "Cultura"
	values:"Algodão", "Milho", "Soja"
    option_cls: Factory.get("SpinnerOptionsCultura")
	font_size: 18

<SpinnerEspecie@Spinner>
	text: "Espécie"
	values:"Anticarsia gemmatalis", "Chrysodeixis includens", "Spodoptera frugiperda", "Spodoptera cosmioides", "Spodoptera eridania", "Helicoverpa zea", "Helicoverpa armigera", "Elasmopalpus lignosellus"
    option_cls: Factory.get("SpinnerOptionsEspecie")
	font_size: 18
	italic: 0

<TextInputComentarios@TextInput>
	size_hint: (0.17, 0.07)
	hint_text:" Comentários..."
	multiline: True


<MyGridLayout>
	canvas.before:
		Color:
			rgba: (1,1,1,1)
		Rectangle:
			pos: self.pos
			size: self.size



WindowManager:
	HomeWindow:
	Etapa1Window:
	RealizaEnsaioWindow:
	Etapa2Window:
	HistoricoWindow:

######################################################################################################################
########################################################## HOME ######################################################
######################################################################################################################

<HomeWindow>
	name:"Home"
	ImageFrame:
		size_hint: (1,1)
	GridLayout:
		cols:1
		size: root.width, root.height
		spacing: 50
		padding: 50
		
######################### IMAGENS ##########################
		GridLayout:
			cols:2
			Image:
				source: 'Assets/Logo_Bayer.png'
				allow_stretch: True
				keep_ratio: True
			Image:
				source: 'Assets/logo_maua_redondo.png'

		GridLayout:
			cols:1
			Label:
				text: "DESENVOLVIMENTO DE SISTEMAS AUTOMATIZADOS\nPARA COLETA E ANÁLISE DE AMOSTRAS DE TECIDO FOLIAR"
				font_size: 32
				halign: "center"

###################### BOTÕES DE NAVEGAÇÃO ####################
		GridLayout:
			cols:3
			padding: 50
			spacing: 100
			RoundedButton:
				text: "1ª Etapa"
				id: etapa1_button
				on_release:
					app.root.current = "1ª Etapa"
					root.manager.transition.direction = "left"
				#on_press: self.background_color = (0, 1, 0, 1)

			RoundedButton:
				text: '2ª Etapa'
				width: 20
				height: 20
				padding: (50, 10)
				spacing: 50
				size_hint: (0.1, 0.2)
				border: (0,0,0,1)
				on_release:
					app.root.current = "2ª Etapa"
					root.manager.transition.direction = "left"

			RoundedButton:
				text: 'Histórico'
				on_release:
					app.root.current = "Histórico"
					root.manager.transition.direction = "left"
					#Factory.MyPopup().open()
			

	

######################################################################################################################
######################################################## 1a ETAPA ####################################################
######################################################################################################################
<Etapa1Window>
	name:"1ª Etapa"
	id_ensaio:id_ensaio
	tecnico:tecnico
	ImageFrame:


####################### TABS ########################
	TabsButton:
		text: "Home"
		pos_hint: {'x': 0.0045, 'y': 0.942}
		on_release:
			root.Clear_Data()
			app.root.current = "Home"
			root.manager.transition.direction = "right"

	TabsButton:
		text: "1ª Etapa"
		pos_hint: {'x': 0.1261, 'y': 0.942}
		background_color: (0/255,188/255,255/255,1)

	TabsButton:
		text: "2ª Etapa"
		pos_hint: {'x': 0.2478, 'y': 0.942}
		on_release:
			root.Clear_Data()
			app.root.current = "2ª Etapa"
			root.manager.transition.direction = "left"
	TabsButton:
		text: "Histórico"
		pos_hint: {'x': 0.369, 'y': 0.942}
		on_release:
			root.Clear_Data()
			app.root.current = "Histórico"
			root.manager.transition.direction = "left"


####################### CADASTRO ####################		
	LabelID:
	LabelID_Numero:
		id: id_ensaio
		text: root.ensaio
		
	LabelTecnico:
	TextInputTecnico:
		id:tecnico

	LabelTime:
		text: "Início:"
	LabelTime_Numero:
		id: current_date
		text: root.current_datetime

	BotaoID:
		text: "Gerar ID"
		pos_hint: {'x': 0.8, 'top': 0.91}
		on_release:
			root.Gera_ID()


##################### COMENTÁRIOS ###################
	CulturaImage:
		id: Image_Cultura_A
		pos_hint: {'x': 0.055, 'y': 0.575}
	SpinnerCultura:
		id: Spinner_Cultura_A
		pos_hint: {'x': 0.06, 'y': 0.525}
		on_text:
			Image_Cultura_A.source= 'Assets/'+Spinner_Cultura_A.text+'_frame.png'
	SpinnerEspecie:
		id: Spinner_Especie_A
		pos_hint: {'x': 0.06, 'y': 0.48}
	TextInputComentarios:
		id: TextInput_Comentarios_A
		pos_hint: {'x': 0.06, 'y': 0.40}
################################
	CulturaImage:
		id: Image_Cultura_B
		pos_hint: {'x': 0.29, 'y': 0.575}
	SpinnerCultura:
		id: Spinner_Cultura_B
		pos_hint: {'x': 0.295, 'y': 0.525}
		on_text:
			Image_Cultura_B.source= 'Assets/'+Spinner_Cultura_B.text+'_frame.png'
	SpinnerEspecie:
		id: Spinner_Especie_B
		pos_hint: {'x': 0.295, 'y': 0.48}
	TextInputComentarios:
		id: TextInput_Comentarios_B
		pos_hint: {'x': 0.295, 'y': 0.40}
################################
	CulturaImage:
		id: Image_Cultura_C
		pos_hint: {'x': 0.53, 'y': 0.575}
	SpinnerCultura:
		id: Spinner_Cultura_C
		pos_hint: {'x': 0.535, 'y': 0.525}
		on_text:
			Image_Cultura_C.source= 'Assets/'+Spinner_Cultura_C.text+'_frame.png'
	SpinnerEspecie:
		id: Spinner_Especie_C
		pos_hint: {'x': 0.535, 'y': 0.48}
	TextInputComentarios:
		id: TextInput_Comentarios_C
		pos_hint: {'x': 0.535, 'y': 0.40}
################################
	CulturaImage:
		id: Image_Cultura_D
		pos_hint: {'x': 0.765, 'y': 0.575}
	SpinnerCultura:
		id: Spinner_Cultura_D
		pos_hint: {'x': 0.77, 'y': 0.525}
		on_text:
			Image_Cultura_D.source= 'Assets/'+Spinner_Cultura_D.text+'_frame.png'
	SpinnerEspecie:
		id: Spinner_Especie_D
		pos_hint: {'x': 0.77, 'y': 0.48}
	TextInputComentarios:
		id: TextInput_Comentarios_D
		pos_hint: {'x': 0.77, 'y': 0.4}
################################
	CulturaImage:
		id: Image_Cultura_E
		pos_hint: {'x': 0.055, 'y': 0.205}
	SpinnerCultura:
		id: Spinner_Cultura_E
		pos_hint: {'x': 0.06, 'y': 0.155}
		on_text:
			Image_Cultura_E.source= 'Assets/'+Spinner_Cultura_E.text+'_frame.png'
	SpinnerEspecie:
		id: Spinner_Especie_E
		pos_hint: {'x': 0.06, 'y': 0.11}
	TextInputComentarios:
		id: TextInput_Comentarios_E
		pos_hint: {'x': 0.06, 'y': 0.03}
################################
	CulturaImage:
		id: Image_Cultura_F
		pos_hint: {'x': 0.29, 'y': 0.205}
	SpinnerCultura:
		id: Spinner_Cultura_F
		pos_hint: {'x': 0.295, 'y': 0.155}
		on_text:
			Image_Cultura_F.source= 'Assets/'+Spinner_Cultura_F.text+'_frame.png'
	SpinnerEspecie:
		id: Spinner_Especie_F
		pos_hint: {'x': 0.295, 'y': 0.11}
	TextInputComentarios:
		id: TextInput_Comentarios_F
		pos_hint: {'x': 0.295, 'y': 0.03}
################################
	CulturaImage:
		id: Image_Cultura_G
		pos_hint: {'x': 0.53, 'y': 0.205}
	SpinnerCultura:
		id: Spinner_Cultura_G
		pos_hint: {'x': 0.535, 'y': 0.155}
		on_text:
			Image_Cultura_G.source= 'Assets/'+Spinner_Cultura_G.text+'_frame.png'
	SpinnerEspecie:
		id: Spinner_Especie_G
		pos_hint: {'x': 0.535, 'y': 0.11}
	TextInputComentarios:
		id: TextInput_Comentarios_G
		pos_hint: {'x': 0.535, 'y': 0.03}
################################
	CulturaImage:
		id: Image_Cultura_H
		pos_hint: {'x': 0.765, 'y': 0.205}
	SpinnerCultura:
		id: Spinner_Cultura_H
		pos_hint: {'x': 0.77, 'y': 0.155}
		on_text:
			Image_Cultura_H.source= 'Assets/'+Spinner_Cultura_H.text+'_frame.png'
	SpinnerEspecie:
		id: Spinner_Especie_H
		pos_hint: {'x': 0.77, 'y': 0.11}
	TextInputComentarios:
		id: TextInput_Comentarios_H
		pos_hint: {'x': 0.77, 'y': 0.03}
################################


###################### 3 BOTÕES ####################
	CriarEnsaio:
		text: "Criar Ensaio"
		on_release:
			root.save_data()

######################################################################################################################
################################################### Realiza Ensaio ###################################################
######################################################################################################################
<RealizaEnsaioWindow>


######################################################################################################################
######################################################## 2a ETAPA ####################################################
######################################################################################################################
<Etapa2Window>
	name:"2ª Etapa"
	id: my_widget
	ImageFrame:

####################### TABS ########################
	TabsButton:
		text: "Home"
		pos_hint: {'x': 0.0045, 'y': 0.942}
		on_release:
			app.root.current = "Home"
			root.manager.transition.direction = "right"
	TabsButton:
		text: "1ª Etapa"
		pos_hint: {'x': 0.1261, 'y': 0.942}
		on_release:
			app.root.current = "1ª Etapa"
			root.manager.transition.direction = "right"
	TabsButton:
		text: "2ª Etapa"
		pos_hint: {'x': 0.2478, 'y': 0.942}
		background_color: (0/255,188/255,255/255,1)
	TabsButton:
		text: "Histórico"
		pos_hint: {'x': 0.369, 'y': 0.942}
		on_release:
			app.root.current = "Histórico"
			root.manager.transition.direction = "left"


####################### CADASTRO ####################		
	LabelID:
	TextInputID:
		id:id_ensaio

	LabelTecnico:
	LabelTecnico_Nome:
		id:tecnico
		text: ''

	LabelTime:
		text: "Início:"
	LabelTime_Numero:
		id: inicio_date
	LabelTime:
		text: "Término:"
		size_hint: (0.08, 0.05)
		pos_hint: {'x': 0.385, 'top': 0.85}
	LabelTime_Numero:
		id: termino_date
		text: root.current_datetime
		pos_hint: {'x': 0.46, 'top': 0.85}

	BotaoID:
		text: "Preencher Dados"
		pos_hint: {'x': 0.8, 'top': 0.91}
		on_release:
			#root.Gera_ID()



##################### COMENTÁRIOS ###################
	CulturaImage:
		id: Image_Cultura_A
		pos_hint: {'x': 0.055, 'y': 0.575}
	SpinnerCultura:
		id: Spinner_Cultura_A
		pos_hint: {'x': 0.06, 'y': 0.525}
		on_text:
			Image_Cultura_A.source= 'Assets/'+Spinner_Cultura_A.text+'_frame.png'
	SpinnerEspecie:
		id: Spinner_Especie_A
		pos_hint: {'x': 0.06, 'y': 0.48}
	TextInputComentarios:
		id: TextInput_Comentarios_A
		pos_hint: {'x': 0.06, 'y': 0.40}
################################
	CulturaImage:
		id: Image_Cultura_B
		pos_hint: {'x': 0.29, 'y': 0.575}
	SpinnerCultura:
		id: Spinner_Cultura_B
		pos_hint: {'x': 0.295, 'y': 0.525}
		on_text:
			Image_Cultura_B.source= 'Assets/'+Spinner_Cultura_B.text+'_frame.png'
	SpinnerEspecie:
		id: Spinner_Especie_B
		pos_hint: {'x': 0.295, 'y': 0.48}
	TextInputComentarios:
		id: TextInput_Comentarios_B
		pos_hint: {'x': 0.295, 'y': 0.40}
################################
	CulturaImage:
		id: Image_Cultura_C
		pos_hint: {'x': 0.53, 'y': 0.575}
	SpinnerCultura:
		id: Spinner_Cultura_C
		pos_hint: {'x': 0.535, 'y': 0.525}
		on_text:
			Image_Cultura_C.source= 'Assets/'+Spinner_Cultura_C.text+'_frame.png'
	SpinnerEspecie:
		id: Spinner_Especie_C
		pos_hint: {'x': 0.535, 'y': 0.48}
	TextInputComentarios:
		id: TextInput_Comentarios_C
		pos_hint: {'x': 0.535, 'y': 0.40}
################################
	CulturaImage:
		id: Image_Cultura_D
		pos_hint: {'x': 0.765, 'y': 0.575}
	SpinnerCultura:
		id: Spinner_Cultura_D
		pos_hint: {'x': 0.77, 'y': 0.525}
		on_text:
			Image_Cultura_D.source= 'Assets/'+Spinner_Cultura_D.text+'_frame.png'
	SpinnerEspecie:
		id: Spinner_Especie_D
		pos_hint: {'x': 0.77, 'y': 0.48}
	TextInputComentarios:
		id: TextInput_Comentarios_D
		pos_hint: {'x': 0.77, 'y': 0.4}
################################
	CulturaImage:
		id: Image_Cultura_E
		pos_hint: {'x': 0.055, 'y': 0.205}
	SpinnerCultura:
		id: Spinner_Cultura_E
		pos_hint: {'x': 0.06, 'y': 0.155}
		on_text:
			Image_Cultura_E.source= 'Assets/'+Spinner_Cultura_E.text+'_frame.png'
	SpinnerEspecie:
		id: Spinner_Especie_E
		pos_hint: {'x': 0.06, 'y': 0.11}
	TextInputComentarios:
		id: TextInput_Comentarios_E
		pos_hint: {'x': 0.06, 'y': 0.03}
################################
	CulturaImage:
		id: Image_Cultura_F
		pos_hint: {'x': 0.29, 'y': 0.205}
	SpinnerCultura:
		id: Spinner_Cultura_F
		pos_hint: {'x': 0.295, 'y': 0.155}
		on_text:
			Image_Cultura_F.source= 'Assets/'+Spinner_Cultura_F.text+'_frame.png'
	SpinnerEspecie:
		id: Spinner_Especie_F
		pos_hint: {'x': 0.295, 'y': 0.11}
	TextInputComentarios:
		id: TextInput_Comentarios_F
		pos_hint: {'x': 0.295, 'y': 0.03}
################################
	CulturaImage:
		id: Image_Cultura_G
		pos_hint: {'x': 0.53, 'y': 0.205}
	SpinnerCultura:
		id: Spinner_Cultura_G
		pos_hint: {'x': 0.535, 'y': 0.155}
		on_text:
			Image_Cultura_G.source= 'Assets/'+Spinner_Cultura_G.text+'_frame.png'
	SpinnerEspecie:
		id: Spinner_Especie_G
		pos_hint: {'x': 0.535, 'y': 0.11}
	TextInputComentarios:
		id: TextInput_Comentarios_G
		pos_hint: {'x': 0.535, 'y': 0.03}
################################
	CulturaImage:
		id: Image_Cultura_H
		pos_hint: {'x': 0.765, 'y': 0.205}
	SpinnerCultura:
		id: Spinner_Cultura_H
		pos_hint: {'x': 0.77, 'y': 0.155}
		on_text:
			Image_Cultura_H.source= 'Assets/'+Spinner_Cultura_H.text+'_frame.png'
	SpinnerEspecie:
		id: Spinner_Especie_H
		pos_hint: {'x': 0.77, 'y': 0.11}
	TextInputComentarios:
		id: TextInput_Comentarios_H
		pos_hint: {'x': 0.77, 'y': 0.03}
################################



###################### 3 BOTÕES ####################
	CriarEnsaio:
		text: "Criar Ensaio"
		on_release:
			root.save_data()
######################################################################################################################
######################################################## HISTÓRICO ###################################################
######################################################################################################################
<HistoricoWindow>
	name:"Histórico"
	ImageFrame:
####################### TABS ########################
	TabsButton:
		text: "Home"
		pos_hint: {'x': 0.0045, 'y': 0.942}
		on_release:
			app.root.current = "Home"
			root.manager.transition.direction = "right"

	TabsButton:
		text: "1ª Etapa"
		pos_hint: {'x': 0.1261, 'y': 0.942}
		on_release:
			app.root.current = "1ª Etapa"
			root.manager.transition.direction = "right"

	TabsButton:
		text: "2ª Etapa"
		pos_hint: {'x': 0.2478, 'y': 0.942}
		on_release:
			app.root.current = "2ª Etapa"
			root.manager.transition.direction = "right"
		
	TabsButton:
		text: "Histórico"
		pos_hint: {'x': 0.369, 'y': 0.942}
		background_color: (0/255,188/255,255/255,1)

####################### CADASTRO ####################		
	LabelID:
	TextInputID:
		id:id_ensaio
	LabelTecnico:
	TextInputTecnico:
		id:tecnico
	LabelTime:
		text: "Início:"

	# ButtonPreencherDados:
	# LabelTermino:
	# TextInputTermino:

##################### COMENTÁRIOS ###################


		
###################### 3 BOTÕES ####################
	GerarRelatorio: